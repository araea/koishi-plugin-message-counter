koishi-plugin-message-counter
========================

[<img alt="github" src="https://img.shields.io/badge/github-araea/message_counter-8da0cb?style=for-the-badge&labelColor=555555&logo=github" height="20">](https://github.com/araea/koishi-plugin-message-counter)
[<img alt="npm" src="https://img.shields.io/npm/v/koishi-plugin-message-counter.svg?style=for-the-badge&color=fc8d62&logo=npm" height="20">](https://www.npmjs.com/package/koishi-plugin-message-counter)

Koishi çš„æ¶ˆæ¯æ•°é‡ç»Ÿè®¡æ’ä»¶ã€‚å‘è¨€æ’è¡Œæ¦œã€‚

## ğŸ“ æ³¨æ„äº‹é¡¹

- ä»…è®°å½•ç¾¤èŠæ¶ˆæ¯
- åˆå§‹åŒ–éœ€è¦æƒé™ç­‰çº§ 3 çº§
- å¿…éœ€ database å’Œ cron æœåŠ¡

## ğŸ” å…³é”®æŒ‡ä»¤

### `messageCounter.æŸ¥è¯¢ [æŒ‡å®šç”¨æˆ·]`

æŸ¥è¯¢æŒ‡å®šç”¨æˆ·çš„å‘è¨€æ¬¡æ•°ä¿¡æ¯ï¼ˆæ¬¡æ•°[æ’å]ï¼‰ã€‚è‹¥ä¸å¸¦ä»»ä½•é€‰é¡¹ï¼Œåˆ™æ˜¾ç¤ºæ‰€æœ‰æ—¶æ®µçš„æ•°æ®ã€‚

**é€‰é¡¹:**

| å‚æ•° | è¯´æ˜ |
|------|------|
| `-d, --day` | ä»Šæ—¥å‘è¨€æ¬¡æ•°[æ’å] |
| `--yd, --yesterday` | æ˜¨æ—¥å‘è¨€æ¬¡æ•°[æ’å] |
| `-w, --week` | æœ¬å‘¨å‘è¨€æ¬¡æ•°[æ’å] |
| `-m, --month` | æœ¬æœˆå‘è¨€æ¬¡æ•°[æ’å] |
| `-y, --year` | ä»Šå¹´å‘è¨€æ¬¡æ•°[æ’å] |
| `-t, --total` | æ€»å‘è¨€æ¬¡æ•°[æ’å] |
| `--dag` | è·¨ç¾¤ä»Šæ—¥å‘è¨€æ¬¡æ•°[æ’å] |
| `--ydag` | è·¨ç¾¤æ˜¨æ—¥å‘è¨€æ¬¡æ•°[æ’å] |
| `--wag` | è·¨ç¾¤æœ¬å‘¨å‘è¨€æ¬¡æ•°[æ’å] |
| `--mag` | è·¨ç¾¤æœ¬æœˆå‘è¨€æ¬¡æ•°[æ’å] |
| `--yag` | è·¨ç¾¤æœ¬å¹´å‘è¨€æ¬¡æ•°[æ’å] |
| `-a, --across` | è·¨ç¾¤æ€»å‘è¨€æ¬¡æ•°[æ’å] |

### `messageCounter.æ’è¡Œæ¦œ [æ˜¾ç¤ºçš„äººæ•°]`

å‘è¨€æ’è¡Œæ¦œã€‚é»˜è®¤ä¸ºä»Šæ—¥å‘è¨€æ¦œã€‚

**é€‰é¡¹:**

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--yd, --yesterday` | æ˜¨æ—¥å‘è¨€æ’è¡Œæ¦œ |
| `-w` | æœ¬å‘¨å‘è¨€æ’è¡Œæ¦œ |
| `-m` | æœ¬æœˆå‘è¨€æ’è¡Œæ¦œ |
| `-y` | ä»Šå¹´å‘è¨€æ’è¡Œæ¦œ |
| `-t` | æ€»å‘è¨€æ’è¡Œæ¦œ |
| `--dag` | è·¨ç¾¤ä»Šæ—¥å‘è¨€æ’è¡Œæ¦œ |
| `--ydag` | è·¨ç¾¤æ˜¨æ—¥å‘è¨€æ’è¡Œæ¦œ |
| `--wag` | è·¨ç¾¤æœ¬å‘¨å‘è¨€æ’è¡Œæ¦œ |
| `--mag` | è·¨ç¾¤æœ¬æœˆå‘è¨€æ’è¡Œæ¦œ |
| `--yag` | è·¨ç¾¤ä»Šå¹´å‘è¨€æ’è¡Œæ¦œ |
| `--dragon` | è·¨ç¾¤æ€»å‘è¨€æ’è¡Œæ¦œï¼ˆåœ£é¾™ç‹æ¦œï¼‰ |
| `--whites` | ç™½åå•ï¼Œåªæ˜¾ç¤ºç™½åå•ç”¨æˆ· |
| `--blacks` | é»‘åå•ï¼Œä¸æ˜¾ç¤ºé»‘åå•ç”¨æˆ· |

### `messageCounter.ç¾¤æ’è¡Œæ¦œ [number:number]`

å„ç¾¤èŠçš„å‘è¨€æ’è¡Œæ¦œã€‚é»˜è®¤ä¸ºä»Šæ—¥å‘è¨€æ¦œã€‚

**é€‰é¡¹:**

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--yd, --yesterday` | æ˜¨æ—¥å‘è¨€æ’è¡Œæ¦œ |
| `-w, -m, -y, -t` | æœ¬å‘¨/æœ¬æœˆ/ä»Šå¹´/æ€»å‘è¨€æ’è¡Œæ¦œ |
| `-s` | æŒ‡å®šç”¨æˆ·çš„ç¾¤å‘è¨€æ’è¡Œæ¦œ |
| `--whites` | ç™½åå•ï¼Œåªæ˜¾ç¤ºç™½åå•ç¾¤ |
| `--blacks` | é»‘åå•ï¼Œä¸æ˜¾ç¤ºé»‘åå•ç¾¤ |

### `messageCounter.æ—¶é—´åˆ†å¸ƒ [top]`

ç”ŸæˆåŒä¸€ç¾¤èŠåœ¨é€‰å®šæ—¶é—´æ®µå†…çš„å‘è¨€åˆ†å¸ƒä¸‰ç»´å›¾ï¼ˆX è½´ä¸ºæ—¶é—´ï¼ŒY è½´ä¸º Top ç”¨æˆ·ï¼ŒZ è½´ä¸ºå‘è¨€æ•°é‡ï¼‰ï¼Œæ”¯æŒæŸ±çŠ¶æˆ–æ›²çº¿å±•ç¤ºã€‚

**é€‰é¡¹:**

| å‚æ•° | è¯´æ˜ |
|------|------|
| `-s, --start` | èµ·å§‹æ—¶é—´ï¼ˆYYYY-MM-DD æˆ– YYYY-MM-DD HH:mmï¼ŒåŒ—äº¬æ—¶é—´ï¼‰ |
| `-e, --end` | ç»“æŸæ—¶é—´ï¼ˆé»˜è®¤å½“å‰æ—¶é—´ï¼‰ |
| `-h, --hours` | å›æº¯å°æ—¶æ•°ï¼ŒæœªæŒ‡å®šèµ·å§‹æ—¶é—´æ—¶ç”Ÿæ•ˆï¼ˆé»˜è®¤ 24 å°æ—¶ï¼‰ |
| `-t, --type` | å›¾è¡¨ç±»å‹ï¼š`bar`ï¼ˆæŸ±çŠ¶ï¼‰æˆ– `line`ï¼ˆæ›²çº¿ï¼‰ |

### `messageCounter.ä¸Šä¼ æŸ±çŠ¶æ¡èƒŒæ™¯`

- ä¸ºè‡ªå·±ä¸Šä¼ ä¸€å¼ è‡ªå®šä¹‰çš„æ°´å¹³æŸ±çŠ¶æ¡èƒŒæ™¯å›¾ç‰‡
- æ–°å›¾ç‰‡ä¼šè¦†ç›–æ—§çš„å›¾ç‰‡ã€‚è‹¥ä¸Šä¼ å¤±è´¥ï¼Œæ—§å›¾ç‰‡ä¹Ÿä¼šè¢«åˆ é™¤
- ä½¿ç”¨æ­¤æŒ‡ä»¤æ—¶éœ€é™„å¸¦å›¾ç‰‡

### `messageCounter.é‡è½½èµ„æº`

- å®æ—¶é‡è½½ç”¨æˆ·å›¾æ ‡ã€æŸ±çŠ¶æ¡èƒŒæ™¯å’Œå­—ä½“æ–‡ä»¶ï¼Œä½¿å…¶æ›´æ”¹å³æ—¶ç”Ÿæ•ˆï¼ˆéœ€è¦æƒé™ç­‰çº§ 2ï¼‰

### `messageCounter.æ¸…ç†ç¼“å­˜`

- æ¸…ç†è¿‡æœŸçš„å¤´åƒç¼“å­˜æ–‡ä»¶ï¼Œä»¥é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼ˆéœ€è¦æƒé™ç­‰çº§ 3ï¼‰
- ç”¨æˆ·æ›´æ¢å¤´åƒåï¼Œæ—§çš„å¤´åƒç¼“å­˜ä¼šå˜æˆâ€œå­¤å„¿ç¼“å­˜â€ã€‚æ­¤æŒ‡ä»¤å¯ä»¥å®‰å…¨åœ°ç§»é™¤å®ƒä»¬ã€‚

## ğŸ¨ è‡ªå®šä¹‰æ°´å¹³æŸ±çŠ¶å›¾æ ·å¼

- é‡è½½æ’ä»¶æˆ–ä½¿ç”¨ `messageCounter.é‡è½½èµ„æº` æŒ‡ä»¤å¯ä½¿æ–°å¢çš„æ–‡ä»¶ç«‹å³ç”Ÿæ•ˆã€‚

### 1. ç”¨æˆ·å›¾æ ‡

- åœ¨ `data/messageCounter/icons` æ–‡ä»¶å¤¹ä¸‹æ·»åŠ ç”¨æˆ·å›¾æ ‡
- æ–‡ä»¶åæ ¼å¼ä¸º `ç”¨æˆ·ID.png`ï¼ˆä¾‹ï¼š`1234567890.png`ï¼‰
- æ”¯æŒå¤šå›¾æ ‡ï¼Œæ–‡ä»¶åæ ¼å¼ä¸º `ç”¨æˆ·ID-1.png`, `ç”¨æˆ·ID-2.png`

### 2. æŸ±çŠ¶æ¡èƒŒæ™¯

- **æ¨èæ–¹å¼**ï¼šä½¿ç”¨ `messageCounter.ä¸Šä¼ æŸ±çŠ¶æ¡èƒŒæ™¯` æŒ‡ä»¤
- **æ‰‹åŠ¨æ–¹å¼**ï¼šåœ¨ `data/messageCounter/barBgImgs` æ–‡ä»¶å¤¹ä¸‹æ·»åŠ èƒŒæ™¯å›¾ç‰‡
- æ”¯æŒå¤šèƒŒæ™¯ï¼ˆéšæœºé€‰ç”¨ï¼‰ï¼Œæ–‡ä»¶åæ ¼å¼ä¸º `ç”¨æˆ·ID-1.png` ç­‰
- å»ºè®®å°ºå¯¸ 850x50 åƒç´ ï¼Œæ–‡ä»¶å `ç”¨æˆ·ID.png`

### 3. è‡ªå®šä¹‰å­—ä½“

- æ’ä»¶å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨å°†å†…ç½®å­—ä½“ `HarmonyOS_Sans_Medium.ttf` æ‹·è´åˆ° `data/messageCounter/fonts/` ç›®å½•ä¸‹ã€‚
- æ‚¨å¯ä»¥å°†è‡ªå·±å–œçˆ±çš„å­—ä½“æ–‡ä»¶æ”¾å…¥æ­¤æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨é…ç½®é¡¹çš„â€œå­—ä½“è®¾ç½®â€ä¸­å¡«å…¥è¯¥å­—ä½“çš„æ–‡ä»¶åç§°ï¼ˆä¸å¸¦åç¼€ï¼‰ã€‚

## ğŸ“· ç¤ºä¾‹æˆªå›¾

![æ’è¡Œæ¦œç¤ºä¾‹](https://github.com/user-attachments/assets/a893f995-a74f-4170-a417-e826cf73f6a2)

## ğŸ™ è‡´è°¢

| é¡¹ç›®/è´¡çŒ®è€… | è´¡çŒ® |
|------------|------|
| [Koishi](https://koishi.chat/) | æœºå™¨äººæ¡†æ¶ |
| [Akisa](https://forum.koishi.xyz/u/akisa/summary) | Akisa å¤§äºº |
| [shangxueink](https://github.com/araea/koishi-plugin-message-counter/pull/11) | ä¸Šå­¦å¤§äºº |
| [shangxue](https://forum.koishi.xyz/u/shangxue/summary) | æ¨é€æ‰€æœ‰é¢‘é“çš„é…ç½®é¡¹ |
| [nullbczd](https://forum.koishi.xyz/u/nullbczd/summary) | æ°´å¹³æŸ±çŠ¶å›¾æ ·å¼ç­‰åŠŸèƒ½ |

## ğŸ’¬ QQ ç¾¤

- 956758505

<br>

#### License

<sup>
Licensed under either of <a href="LICENSE-APACHE">Apache License, Version
2.0</a> or <a href="LICENSE-MIT">MIT license</a> at your option.
</sup>

<br>

<sub>
Unless you explicitly state otherwise, any contribution intentionally submitted
for inclusion in this crate by you, as defined in the Apache-2.0 license, shall
be dual licensed as above, without any additional terms or conditions.
</sub>
